(this.webpackChunkdiscord_developers=this.webpackChunkdiscord_developers||[]).push([[36742],{341022:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=G;var n,a=h(r(192379)),l=T(r(726372)),i=T(r(565925)),o=T(r(39383)),u=r(318311),f=r(321168),s=r(429634),d=r(277793),c=T(r(614920)),p=T(r(462613)),_=T(r(979133)),g=T(r(377275)),v=T(r(711919)),E=r(835912),M=T(r(405107)),y=T(r(555540)),O=h(r(947929)),P=h(r(784810)),D=r(152728),I=T(r(626294)),A=r(747141),R=r(544483),S=T(r(877786));function T(e){return e&&e.__esModule?e:{default:e}}function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(b=function(e){return e?r:t})(e)}function h(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=b(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&{}.hasOwnProperty.call(e,l)){
var i=a?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(n,l,i):n[l]=e[l]}return n.default=e,r&&r.set(e,n),n}function m(e,t,r,a){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var l=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=a;else if(i>1){for(var o=Array(i),u=0;u<i;u++)o[u]=arguments[u+3];t.children=o}if(t&&l)for(var f in l)void 0===t[f]&&(t[f]=l[f]);else t||(t=l||{});return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function N(){return N=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},N.apply(null,arguments)}const U=/^(?:\/?)([^\/]+?)$/g,L=/^\s*([^\/:]+:\/\/)?\s*|\s*$/g,C=/^localhost\:?(\d+)?/g,w={prefix:"/",target:"",id:(0,o.default)()};var j=function(e){e[e.UNSUBMITTED=0]="UNSUBMITTED";e[e.SUBMITTING=1]="SUBMITTING"
;e[e.SUBMITTED=2]="SUBMITTED";return e}(j||{});const B="https://discord.com/developers/docs/activities/development-guides#url-mapping";function G(e){let{applicationId:t}=e;const r=(0,f.useStateFromStores)([M.default],(()=>M.default.getApplicationProxyConfig(t))),n=(0,f.useStateFromStores)([M.default],(()=>M.default.getApplication(t))),[T,b]=a.useMemo((()=>function(e){var t;if(null==e||0===e.length)return[[],N({},w)];const r=e.map((e=>N({},e,{id:(0,o.default)()}))),n=null!==(t=r.pop())&&void 0!==t?t:N({},w);return[r,n]}(r)),[r]),[h,G]=a.useState(j.UNSUBMITTED),[x,k]=a.useState(null),[F,W]=a.useState({}),[$,H]=a.useState([...T]),[V,z]=a.useState(N({},b));a.useEffect((()=>{H([...T]);z(N({},b))}),[T,b]);a.useEffect((()=>W({})),[$,V]);const Q=null!=y.default.user&&null!=n&&(0,E.teamMemberCan)(n.owner.id,y.default.user.id,u.TeamMemberRoles.DEVELOPER);function X(e,t){let{item:r}=e;const{prefix:n,target:a,id:l}=r;return m(I.default,{prefix:n,target:a,fieldsWithErrors:t,
onChange:(e,t)=>function(e,t,r){const n=$.findIndex((e=>e.id===t)),a=$[n];if(null==a||null==r)return;let l=null,i=e;if("prefix"===r)i=e.replace(U,"/$1").replace(" ","");else if("target"===r){i=e.replace(L,"");null!=i.match(C)&&(l=R.Messages.ERRORS_ERROR_LOCALHOST_INVALID_TARGET)}const o=N({},a,{[r]:i}),u=[...$];u[n]=o;H(u);G(j.UNSUBMITTED);k(l)}(e,l,t)},l)}const Y=!(0,i.default)(T,$)||!(0,i.default)(b,V);return m(_.default,{},void 0,m(v.default,{hasUnsavedChanges:Y,saving:h===j.SUBMITTING,saveDisabled:""===V.target||null!=x,onReset:function(){z(N({},b));H([...T]);k(null);G(j.UNSUBMITTED)},onSubmit:async function(){if(""===V.target){k(R.Messages.EMBEDDED_APPLICATION_ROOT_MAPPING_REQUIRED);return}G(j.SUBMITTING);const e=$.map((e=>{let{prefix:t,target:r}=e;return{prefix:t,target:r}}));e.push({prefix:V.prefix,target:V.target});try{await(0,d.updateApplicationProxyConfig)(t,e);await(0,d.fetchApplication)(t);(0,D.track)(A.AnalyticsEvents.ACTIVITY_URL_MAPPINGS_UPDATED,{application_id:t,
is_first_update:""===b.target})}catch(e){k(R.Messages.ERRORS_ERROR_SUBMITTING_FORM.format());if(e instanceof s.V8APIError&&e.hasFieldErrors()){var r;const t=void 0!==(null===(r=e.errors)||void 0===r?void 0:r.url_map)?e.errors.url_map:{},n=Object.entries(t).reduce(((e,t)=>{let[r,n]=t;e[r]=Object.keys(n);return e}),{});W(n)}}G(j.SUBMITTED)}},void 0,m(g.default,{},void 0,R.Messages.EMBEDDED_APPLICATION_URL_MAPPINGS),m("div",{},void 0,R.Messages.EMBEDDED_APPLICATION_URL_MAPPING_DOCUMENTATION_HERE.format({url:B})),Y&&""===V.target?m(p.default,{type:p.default.Types.ERROR},void 0,R.Messages.EMBEDDED_APPLICATION_ROOT_MAPPING_REQUIRED):null!=x?m(p.default,{type:p.default.Types.ERROR},void 0,x):h===j.SUBMITTED?m(p.default,{type:p.default.Types.SUCCESS},void 0,R.Messages.ALERTS_SUCCESS_CHANGES_SAVED):null,m(P.default,{},void 0,m(c.default,{getId:e=>e.id,onMove:H,onDelete:function(e){const t=$.filter((t=>t.id!==e.id));H(t)},data:[...$],renderRow:e=>X(e,F[e.index]),className:S.default.draggableList
}),m(I.default,{prefix:V.prefix,target:V.target,onChange:function(e){const t=e.replace(L,"");z(N({},V,{target:t}));G(j.UNSUBMITTED);k(null)},isRoot:!0,className:(0,l.default)(S.default.baseURLMappingSection,{[S.default.divider]:$.length>0})},"base"),Q&&m(P.GridSection,{},void 0,m(P.GridChild,{columnSpread:12},void 0,m(O.default,{height:O.ButtonHeight.MEDIUM,onClick:function(){const e=[{id:(0,o.default)(),prefix:"",target:""},...$];H(e)},disabled:""===V.target||null!=$.find((e=>""===e.prefix||""===e.target))},void 0,R.Messages.EMBEDDED_APPLICATION_ADD_ANOTHER))))))}G.displayName="EmbeddedApplicationProxyConfigForm"},360478:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(){const e=(0,i.useParams)(),t=(0,p.isNotNull)(e.id),[r,a]=l.useState(y.LOADING);l.useEffect((()=>{!async function(){try{await(0,o.getApplicationProxyConfig)(t);a(y.LOADED)}catch(e){a(y.ERROR)}}()}),[t])
;return l.createElement(l.Fragment,null,M(d.default,{},void 0,M(f.default,{},void 0,g.Messages.EMBEDDED_APPLICATION_EMBEDDED_APPLICATION_URL_MAPPINGS_HEADING),M(c.default,{isFlush:!0},void 0,g.Messages.EMBEDDED_APPLICATION_EMBEDDED_APPLICATION_URL_MAPPINGS_SUBHEADING),r===y.ERROR&&M(u.default,{type:u.default.Types.ERROR},void 0,g.Messages.ERRORS_ERROR_LOADING_PROXY_CONFIG)),r===y.LOADING?n||(n=M(s.default,{})):M(_.default,{applicationId:t}))};var n,a,l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=E(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&{}.hasOwnProperty.call(e,l)){var i=a?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(n,l,i):n[l]=e[l]}return n.default=e,r&&r.set(e,n),n
}(r(192379)),i=r(887614),o=r(277793),u=v(r(462613)),f=v(r(204633)),s=v(r(565631)),d=v(r(979133)),c=v(r(468287)),p=r(55424),_=v(r(341022)),g=r(544483);function v(e){return e&&e.__esModule?e:{default:e}}function E(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(E=function(e){return e?r:t})(e)}function M(e,t,r,n){a||(a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var l=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=n;else if(i>1){for(var o=Array(i),u=0;u<i;u++)o[u]=arguments[u+3];t.children=o}if(t&&l)for(var f in l)void 0===t[f]&&(t[f]=l[f]);else t||(t=l||{});return{$$typeof:a,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}var y=function(e){e[e.LOADING=0]="LOADING";e[e.LOADED=1]="LOADED";e[e.ERROR=2]="ERROR";return e}(y||{})},626294:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var n,a=function(e,t){
if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=d(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&{}.hasOwnProperty.call(e,l)){var i=a?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(n,l,i):n[l]=e[l]}return n.default=e,r&&r.set(e,n),n}(r(192379)),l=s(r(726372)),i=s(r(96082)),o=s(r(625224)),u=r(544483),f=s(r(171505));function s(e){return e&&e.__esModule?e:{default:e}}function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(d=function(e){return e?r:t})(e)}function c(e,t,r,a){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var l=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=a;else if(i>1){for(var o=Array(i),u=0;u<i;u++)o[u]=arguments[u+3];t.children=o}
if(t&&l)for(var f in l)void 0===t[f]&&(t[f]=l[f]);else t||(t=l||{});return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function p(e){let{prefix:t,target:r,onChange:n,isRoot:s=!1,className:d,fieldsWithErrors:p}=e;const _=a.useId();return c("div",{className:(0,l.default)(f.default.urlMappingSection,d)},void 0,c("div",{className:f.default.urlMappingField},void 0,c(i.default,{htmlFor:_+"_prefix"},void 0,s?u.Messages.EMBEDDED_APPLICATION_ROOT_MAPPING:u.Messages.EMBEDDED_APPLICATION_PREFIX),c(o.default,{id:_+"_prefix",onChange:n,name:"prefix",placeholder:"/blorp",value:t,disabled:s,hasError:null==p?void 0:p.includes("prefix")})),c("div",{className:f.default.urlMappingField},void 0,c(i.default,{htmlFor:_+"_target"},void 0,u.Messages.EMBEDDED_APPLICATION_TARGET),c(o.default,{id:_+"_target",onChange:n,name:"target",placeholder:"your-app-website.com",value:r,hasError:null==p?void 0:p.includes("target")})))}p.displayName="ProxyURLMappingSection";t.default=p},
462613:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=c;var n=s(r(192379)),a=u(r(726372)),l=s(r(305393)),i=u(r(184725));const o=["className"];function u(e){return e&&e.__esModule?e:{default:e}}function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(f=function(e){return e?r:t})(e)}function s(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=f(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&{}.hasOwnProperty.call(e,l)){var i=a?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(n,l,i):n[l]=e[l]}return n.default=e,r&&r.set(e,n),n}function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},
d.apply(null,arguments)}function c(e){let{className:t}=e,r=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;r[n]=e[n]}return r}(e,o);return n.createElement(l.default,d({},r,{className:(0,a.default)(i.default.formStatusAlert,t)}))}c.displayName="FormStatusAlert";c.Types=l.AlertTypes},565925:(e,t,r)=>{var n=r(733892);e.exports=function(e,t){return n(e,t)}},877786:(e,t,r)=>{"use strict";r.r(t);r.d(t,{default:()=>n});const n={draggableList:"draggableList-2pncPj",baseURLMappingSection:"baseURLMappingSection-32n34b",divider:"divider-2HNWbs"}},171505:(e,t,r)=>{"use strict";r.r(t);r.d(t,{default:()=>n});const n={urlMappingSection:"urlMappingSection-2wnzpB",urlMappingField:"urlMappingField-16gzaB"}},184725:(e,t,r)=>{"use strict";r.r(t);r.d(t,{default:()=>n});const n={formStatusAlert:"formStatusAlert-3R_MWq"}}}]);
//# sourceMappingURL=d9db30cefcef148c24e0.js.map