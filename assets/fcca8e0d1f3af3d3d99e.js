"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([["55183"],{566111:function(e,t,n){n.d(t,{Z:function(){return c}}),n(47120);var r=n(192379),i=n(442837),l=n(365943),s=n(25251),o=n(223143);function c(e){var t;let{isFetching:n,fetchCategoriesError:c,fetchPurchasesError:a,categories:d,purchases:u}=(0,o.ZP)({location:e}),[f,m,p]=(0,i.Wu)([s.Z],()=>[s.Z.isFetching,s.Z.fetchError,s.Z.profileEffects]);return r.useEffect(()=>{(0,l.z)(!0)},[]),{isFetching:n||f,combinedError:null!==(t=null!=c?c:a)&&void 0!==t?t:m,profileEffects:p,categories:d,purchases:u}}},528439:function(e,t,n){n.d(t,{$0:function(){return r},Tm:function(){return p},oT:function(){return h}}),n(47120),n(724458),n(653041);var r,i,l=n(192379),s=n(392711),o=n(399606),c=n(597688),a=n(1870),d=n(884697),u=n(594174),f=n(74538),m=n(388032);(i=r||(r={})).PURCHASE="purchase",i.PREMIUM_PURCHASE="premium_purchase",i.PREVIEW="preview";let p={id:"None"},h={id:"Shop"};t.ZP=()=>{let e=(0,o.e7)([u.default],()=>u.default.getCurrentUser()),t=f.ZP.canUseCollectibles(e),n=(0,o.e7)([a.Z],()=>a.Z.purchases),[r,i]=(0,o.Wu)([c.Z],()=>[c.Z.categories,c.Z.products]);return(0,l.useMemo)(()=>{let e=(0,s.uniqBy)([...(0,d.aj)(n),...(0,d.XS)(r)],"id").reduce((e,r)=>{let l=n.get(r.skuId);return(0,d.qS)(l)?(e.premium_purchase.push(r),e):null!=l?(e.purchase.push(r),e):!t&&(0,d.G1)(i.get(r.skuId))?(e.premium_purchase.push(r),e):(e.preview.push(r),e)},{purchase:[],premium_purchase:[],preview:[]});return[{section:"purchase",items:[p,h,...e.purchase],height:12,header:m.intl.string(m.t.JEimX1)},{section:"premium_purchase",items:e.premium_purchase,height:12,header:m.intl.string(m.t.DIJLzM)},{section:"preview",items:e.preview,height:12,header:m.intl.string(m.t.fmIfaG)}].filter(e=>{let{items:t}=e;return t.length>0})},[r,i,n,t])}},191564:function(e,t,n){n.r(t),n.d(t,{default:function(){return B}}),n(47120);var r=n(200651),i=n(192379),l=n(979554),s=n(442837),o=n(481060),c=n(100527),a=n(906732),d=n(335131),u=n(884697),f=n(449217),m=n(566111),p=n(222062),h=n(269982),g=n(197115),x=n(150039),C=n(594174),I=n(626135),v=n(74538),E=n(934261),P=n(52268),_=n(981631),j=n(474936),S=n(388032),N=n(390153);function Z(e){let{user:t,product:n,purchase:l,onApply:s,onClose:a,disableApplyButton:f,canUseCollectibles:m,selectedProfileEffectId:x,selectedProfileEffectItem:C,analyticsLocations:I}=e,E=i.useCallback(()=>{a(),(0,d.mK)({analyticsLocations:I,analyticsSource:c.Z.EDIT_PROFILE_EFFECT_MODAL,initialProductSkuId:null!=C?C.skuId:void 0})},[a,I,C]),P=(0,p.M)();return(0,r.jsxs)(o.ModalFooter,{className:N.modalFooter,children:[(0,r.jsxs)("div",{className:N.buttonsRight,children:[!P&&(0,r.jsx)(o.Button,{look:o.Button.Looks.LINK,color:o.Button.Colors.PRIMARY,onClick:a,children:S.intl.string(S.t["ETE/oK"])}),null!=l&&(!(0,u.qS)(l)||m)||null===x?(0,r.jsx)(o.Button,{onClick:s,disabled:f,children:S.intl.string(S.t.d6sv6u)}):m||!(0,u.G1)(n)?(0,r.jsx)(o.Button,{onClick:E,children:S.intl.string(S.t.fYfGgI)}):(0,r.jsx)(g.Z,{subscriptionTier:j.Si.TIER_2,showGradient:P,buttonText:v.ZP.isPremium(t)?S.intl.string(S.t.KXLX7u):P?S.intl.string(S.t.pj0XBA):S.intl.string(S.t.mr4K7O)})]}),P&&(0,u.G1)(n)&&(0,r.jsx)(h.Z,{product:n,onSecondaryClick:a})]})}function T(e){let{user:t,guild:n,categories:l,purchases:s,onClose:c,initialSelectedProfileEffectId:a,currentSavedEffectId:d,analyticsLocations:m}=e,{pendingProfileEffectId:p}=(0,x.bd)(n),[h,g]=i.useMemo(()=>{let e=(0,u.bl)(l,s);return[e.purchased,e.shopPreviews]},[l,s]),[C,I]=i.useState(()=>null!=a?a:void 0!==p?p:null==d?null:null!=d?d:null),[_,j]=i.useMemo(()=>{var e;let t=h.find(e=>(null==e?void 0:e.id)===C),n=null!=t||null===C;return[null!==(e=null!=t?t:g.find(e=>(null==e?void 0:e.id)===C))&&void 0!==e?e:null,n]},[C,h,g]),{product:T,purchase:B}=(0,f.Z)(null==_?void 0:_.skuId),b=i.useRef(null),A=v.ZP.canUseCollectibles(t),k=C===(void 0===p?null!=d?d:null:p),y=i.useCallback(e=>{I(e)},[I]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(o.ModalHeader,{separator:!1,className:N.modalHeader,children:[(0,r.jsx)(o.Heading,{variant:"heading-lg/semibold",children:S.intl.string(S.t.t5SVGR)}),(0,r.jsx)(o.ModalCloseButton,{className:N.modalCloseButton,onClick:c})]}),(0,r.jsxs)(o.ModalContent,{className:N.modalContent,children:[(0,r.jsx)(P.Z,{user:t,guild:n,pendingProfileEffect:C,selectedProfileEffectRef:b,onSelect:y,onClose:c}),(0,r.jsx)(E.Z,{user:t,canApplySelectedChange:j,pendingProfileEffectRecord:_,product:T,purchase:B,guild:n})]}),(0,r.jsx)(Z,{user:t,onApply:()=>{(0,x.s6)(C,d,null==n?void 0:n.id),c()},onClose:c,product:T,purchase:B,canUseCollectibles:A,selectedProfileEffectId:C,selectedProfileEffectItem:_,disableApplyButton:k,analyticsLocations:m})]})}function B(e){let{transitionState:t,analyticsLocations:n,initialSelectedEffectId:u,guild:f,onClose:p}=e,{isFetching:h,categories:g,purchases:v}=(0,m.Z)("ProfileEffectModal"),E=(0,s.e7)([C.default],()=>C.default.getCurrentUser()),{analyticsLocations:P}=(0,a.ZP)(n,c.Z.EDIT_PROFILE_EFFECT_MODAL),j=(0,x.Kg)(E,f);return i.useEffect(()=>{I.default.track(_.rMx.OPEN_MODAL,{type:_.jXE.PROFILE_EFFECT_CUSTOMIZATION,location_stack:P})},[P]),i.useEffect(()=>()=>{(0,d.K$)({categories:[...g.values()],itemTypes:[l.Z.PROFILE_EFFECT]})},[g]),(0,r.jsx)(a.Gt,{value:P,children:(0,r.jsx)(o.ModalRoot,{transitionState:t,className:N.modal,size:h?o.ModalSize.DYNAMIC:o.ModalSize.MEDIUM,children:h?(0,r.jsx)(o.Spinner,{className:N.spinner,type:o.Spinner.Type.SPINNING_CIRCLE}):(0,r.jsx)(T,{user:E,guild:f,categories:g,purchases:v,initialSelectedProfileEffectId:u,currentSavedEffectId:j,onClose:p,analyticsLocations:P})})})}},934261:function(e,t,n){var r=n(200651);n(192379);var i=n(442837),l=n(481060),s=n(809206),o=n(597688),c=n(884697),a=n(905357),d=n(95422),u=n(18438),f=n(778825),m=n(957730),p=n(222062),h=n(921813),g=n(350327),x=n(687158),C=n(706454),I=n(695346),v=n(265159),E=n(25990),P=n(594174),_=n(55935),j=n(74538),S=n(388032),N=n(164487);let Z=e=>{let{effectIsOwned:t,pendingProfileEffectRecord:n,product:s,purchase:u}=e,f=(0,i.e7)([P.default],()=>P.default.getCurrentUser()),m=(0,i.e7)([o.Z],()=>o.Z.getProduct(null==n?void 0:n.skuId)),h=(0,i.e7)([C.default],()=>C.default.locale),g=j.ZP.canUseCollectibles(f),x=(0,c.qS)(u),I=(0,c.G1)(s),v=!g&&x,E=(null==u?void 0:u.expiresAt)!=null?(0,_.TD)(Date.now(),u.expiresAt):null,Z=(0,d.a)(u),B=(0,a.k)(m),b=(0,p.M)(!I||g),A=T(v,I,g,b);return null!=n?(0,r.jsx)("div",{className:t?N.effectDescriptionNoGradient:N.effectDescriptionBorderWithGradient,children:(0,r.jsxs)("div",{className:N.effectDescriptionContainer,children:[(0,r.jsx)(l.Text,{color:"header-primary",variant:"text-sm/semibold",className:N.effectName,children:null!=Z?Z:B}),(0,r.jsx)(l.Text,{color:"text-normal",variant:"text-sm/normal",className:N.effectDescription,children:null!=u?u.summary:A}),null!=E&&(0,r.jsx)(l.Text,{variant:"text-xxs/normal",color:"text-muted",className:N.effectPurchasedAt,children:S.intl.format(S.t.Io7ozs,{days:E.days.toString()})}),null!=u&&(0,r.jsxs)(l.Text,{variant:"text-xxs/normal",color:"text-muted",className:N.effectPurchasedAt,children:[S.intl.format(S.t.gW9R4O,{date:u.purchasedAt.toLocaleDateString(h,{month:"long",year:"numeric"})}),null!=u.expiresAt&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("br",{}),S.intl.format(S.t.eZSTa2,{date:u.expiresAt.toLocaleDateString(h,{minute:"numeric",hour:"numeric",day:"numeric",month:"long",year:"numeric"})})]})]}),x&&(0,r.jsx)(l.Text,{variant:"text-xxs/normal",color:"text-muted",className:N.effectPurchasedAt,children:S.intl.string(S.t.UewH9P)})]})}):null},T=(e,t,n,r)=>{if(e)return S.intl.string(S.t.ZVTtBg);if(t&&n)return S.intl.string(S.t.L5hyz8);if(t&&!n)return r?S.intl.string(S.t.meldu7):S.intl.string(S.t.bGl9t7);return S.intl.string(S.t.PXzyvr)};t.Z=e=>{var t;let{user:n,pendingProfileEffectRecord:l,canApplySelectedChange:o,product:c,purchase:a,guild:d}=e,{pendingGlobalName:p,pendingNickname:C,pendingPronouns:P,pendingBio:_,pendingBanner:S,pendingAvatar:T,pendingAvatarDecoration:B,pendingThemeColors:b,pendingAccentColor:A}=(0,i.cj)([f.Z,E.Z],()=>({pendingNickname:void 0,pendingGlobalName:void 0,pendingAccentColor:void 0,...null!=d?f.Z.getAllPending():E.Z.getAllPending()})),k=j.ZP.isPremium(n),y=j.ZP.canUsePremiumProfileCustomization(n),G=(0,x.ZP)(n.id),M=!!(null==G?void 0:G.getPreviewBio(_).value),R={user:n,guild:d,pendingGlobalName:p,pendingNickname:C,pendingPronouns:P,pendingBio:I.dN.useSetting()&&null!=_?m.ZP.parse(void 0,_).content:_,pendingBanner:S,useLargeBanner:!0,pendingAvatar:T,pendingAvatarDecoration:B,pendingThemeColors:b,pendingAccentColor:A,pendingProfileEffectId:null!==(t=null==l?void 0:l.id)&&void 0!==t?t:null,hideFakeActivity:M,canUsePremiumCustomization:y,onUpsellClick:v.Z,onAvatarChange:null!=d?u.I5:s.I5,onBannerChange:g.g_};return(0,r.jsxs)("div",{className:N.previewContainer,children:[(0,r.jsx)(h.Z,{...R,disabledInputs:!0,hideCustomStatus:!0}),!1,(0,r.jsx)(Z,{effectIsOwned:o,pendingProfileEffectRecord:l,product:c,purchase:a,userIsPremium:k})]})}},52268:function(e,t,n){n(627341);var r=n(200651),i=n(192379),l=n(120356),s=n.n(l),o=n(278074),c=n(831209),a=n(399606),d=n(481060),u=n(37234),f=n(597688),m=n(884697),p=n(222062),h=n(74538),g=n(731896),x=n(528439),C=n(981631),I=n(388032),v=n(479366),E=n(223223);let P=()=>80,_=e=>{let{children:t,className:n,isSelected:i=!1,...l}=e;return(0,r.jsx)(d.Clickable,{className:s()(v.effectGridItem,n,{[v.selected]:i}),...l,onClick:l.onSelect,children:t})},j=e=>{var t;let{user:n,profileEffect:l,innerRef:s,section:o,isSelected:u,...C}=e,P=(0,g.V)(l.id),j=(0,a.e7)([f.Z],()=>{let e=f.Z.getProduct(l.skuId);return(0,m.G1)(e)}),S=(0,m.Yq)(l.skuId),N=i.useRef(null),{accessibilityLabel:Z,thumbnailPreviewSrc:T,title:B}=null!==(t=null==P?void 0:P.config)&&void 0!==t?t:{},b=h.ZP.canUseCollectibles(n),A=o===x.$0.PREMIUM_PURCHASE&&!b,k=(0,p.M)();return(0,r.jsxs)(_,{className:!A||u||k?void 0:v.decorationGridItemChurned,innerRef:null!=s?s:N,isSelected:u,...C,children:[(0,r.jsx)("img",{src:E,alt:Z,className:v.presetEffectBackground}),(0,r.jsx)("img",{className:v.presetEffectImg,src:T,alt:B}),o===x.$0.PURCHASE||o===x.$0.PREMIUM_PURCHASE&&b?null:S?(0,r.jsx)(d.PremiumBadge,{className:v.newBadge,text:(0,r.jsxs)("div",{className:v.newBadgeText,children:[(0,r.jsx)(d.LockIcon,{size:"xxs",color:"currentColor"}),I.intl.string(I.t.y2b7CA)]})}):(0,r.jsx)(d.IconBadge,{icon:j?()=>(0,r.jsx)(d.NitroWheelIcon,{size:"custom",color:"currentColor",width:14,height:14}):()=>(0,r.jsx)(d.LockIcon,{size:"xxs",color:"currentColor"}),color:c.Z.BACKGROUND_ACCENT,className:v.lockBadge})]})};t.Z=e=>{let{user:t,guild:n,pendingProfileEffect:i,selectedProfileEffectRef:l,onSelect:s,onClose:c}=e,a=()=>{c(),(0,u.jN)(C.S9g.COLLECTIBLES_SHOP)},f=(0,x.ZP)(),m=null!=i;return(0,r.jsx)("section",{className:v.section,children:(0,r.jsx)(d.MasonryList,{fade:!0,itemGutter:12,sectionGutter:16,paddingVertical:0,paddingHorizontal:12,className:v.list,columns:3,sections:f.map(e=>{let{items:t}=e;return t.length}),renderItem:(e,c,u,p)=>{let{section:h,items:g}=f[e];return(0,o.EQ)(g[c]).with(x.Tm,()=>(0,r.jsxs)(_,{style:{...u},isSelected:!m,onSelect:()=>s(null),children:[(0,r.jsx)(d.DenyIcon,{size:"md",color:"currentColor",className:v.notAllowedIcon}),(0,r.jsx)(d.Text,{variant:"text-xs/normal",color:"header-primary",children:null!=n?I.intl.string(I.t.GJ3Fcn):I.intl.string(I.t.PoWNfX)})]},p)).with(x.oT,()=>(0,r.jsxs)(_,{style:u,onSelect:a,children:[(0,r.jsx)(d.ShopIcon,{size:"custom",width:23,height:23,color:"currentColor",className:v.shopIcon}),(0,r.jsx)(d.Text,{variant:"text-xs/normal",color:"header-primary",children:I.intl.string(I.t.pWG4zc)})]},p)).otherwise(e=>{let n=i===e.id;return(0,r.jsx)(j,{user:t,style:{...u},section:h,profileEffect:e,innerRef:n?l:void 0,isSelected:n,onSelect:()=>s(e.id)},p)})},renderSection:(e,t)=>{let{header:n}=f[e];return(0,r.jsx)("div",{style:{...t,height:"".concat(16,"px"),position:"absolute"},children:(0,r.jsx)(d.FormTitle,{children:n})})},getSectionHeight:()=>16,getItemKey:(e,t)=>{var n,r;return null!==(r=null===(n=f[e].items[t])||void 0===n?void 0:n.id)&&void 0!==r?r:null},getItemHeight:P,removeEdgeItemGutters:!0})})}},265159:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(200651);n(192379);var i=n(481060),l=n(981631);function s(){(0,i.openModalLazy)(async()=>{let{default:e}=await n.e("38047").then(n.bind(n,975863));return t=>(0,r.jsx)(e,{...t,source:{page:l.ZY5.USER_SETTINGS,section:l.jXE.SETTINGS_CUSTOMIZE_PROFILE,object:l.qAy.BUTTON_CTA,type:l.Qqv.BUY}})})}},390153:function(e,t,n){e.exports={modal:"modal_fbd6d1",modalFooter:"modalFooter_fbd6d1",buttonsRight:"buttonsRight_fbd6d1",modalHeader:"modalHeader_fbd6d1",modalCloseButton:"modalCloseButton_fbd6d1",modalContent:"modalContent_fbd6d1",spinner:"spinner_fbd6d1"}},164487:function(e,t,n){e.exports={previewContainer:"previewContainer_a9d381",effectDescriptionBorderWithGradient:"effectDescriptionBorderWithGradient_a9d381 effectDescriptionBorder_a9d381",effectDescriptionNoGradient:"effectDescriptionNoGradient_a9d381 effectDescriptionBorder_a9d381",effectDescriptionContainer:"effectDescriptionContainer_a9d381",effectDescription:"effectDescription_a9d381",effectName:"effectName_a9d381",effectPurchasedAt:"effectPurchasedAt_a9d381"}},479366:function(e,t,n){e.exports={notAllowedIcon:"notAllowedIcon_c80296 icon_c80296",effectGridItem:"effectGridItem_c80296",selected:"selected_c80296",section:"section_c80296",list:"list_c80296",shopIcon:"shopIcon_c80296 icon_c80296",decorationGridItemChurned:"decorationGridItemChurned_c80296",lockBadge:"lockBadge_c80296",newBadge:"newBadge_c80296",newBadgeText:"newBadgeText_c80296",presetEffectImg:"presetEffectImg_c80296",presetEffectBackground:"presetEffectBackground_c80296"}}}]);
//# sourceMappingURL=fcca8e0d1f3af3d3d99e.js.map